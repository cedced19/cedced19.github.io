(function(e){function d(c){this.template=c;this.ENTER_KEY=13;this.ESCAPE_KEY=27;this.$todoList=qs("#todo-list");this.$todoItemCounter=qs("#todo-count");this.$clearCompleted=qs("#clear-completed");this.$main=qs("#main");this.$footer=qs("#footer");this.$toggleAll=qs("#toggle-all");this.$newTodo=qs("#new-todo")}d.prototype._removeItem=function(c){(c=qs('[data-id="'+c+'"]'))&&this.$todoList.removeChild(c)};d.prototype._clearCompletedButton=function(c,b){this.$clearCompleted.innerHTML=this.template.clearCompletedButton(c);
this.$clearCompleted.style.display=b?"block":"none"};d.prototype._setFilter=function(c){qs("#filters .selected").className="";qs('#filters [href="#/'+c+'"]').className="selected"};d.prototype._elementComplete=function(c,b){var a=qs('[data-id="'+c+'"]');a&&(a.className=b?"completed":"",qs("input",a).checked=b)};d.prototype._editItem=function(c,b){var a=qs('[data-id="'+c+'"]');if(a){a.className+=" editing";var d=document.createElement("input");d.className="edit";a.appendChild(d);d.focus();d.value=b}};
d.prototype._editItemDone=function(c,b){var a=qs('[data-id="'+c+'"]');if(a){var d=qs("input.edit",a);a.removeChild(d);a.className=a.className.replace("editing","");qsa("label",a).forEach(function(a){a.textContent=b})}};d.prototype.render=function(c,b){var a=this;({showEntries:function(){a.$todoList.innerHTML=a.template.show(b)},removeItem:function(){a._removeItem(b)},updateElementCount:function(){a.$todoItemCounter.innerHTML=a.template.itemCounter(b)},clearCompletedButton:function(){a._clearCompletedButton(b.completed,
b.visible)},contentBlockVisibility:function(){a.$main.style.display=a.$footer.style.display=b.visible?"block":"none"},toggleAll:function(){a.$toggleAll.checked=b.checked},setFilter:function(){a._setFilter(b)},clearNewTodo:function(){a.$newTodo.value=""},elementComplete:function(){a._elementComplete(b.id,b.completed)},editItem:function(){a._editItem(b.id,b.title)},editItemDone:function(){a._editItemDone(b.id,b.title)}})[c]()};d.prototype._itemId=function(c){c=$parent(c,"li");return parseInt(c.dataset.id,
10)};d.prototype._bindItemEditDone=function(c){var b=this;$live("#todo-list li .edit","blur",function(){this.dataset.iscanceled||c({id:b._itemId(this),title:this.value})});$live("#todo-list li .edit","keypress",function(a){a.keyCode===b.ENTER_KEY&&this.blur()})};d.prototype._bindItemEditCancel=function(c){var b=this;$live("#todo-list li .edit","keyup",function(a){a.keyCode===b.ESCAPE_KEY&&(this.dataset.iscanceled=!0,this.blur(),c({id:b._itemId(this)}))})};d.prototype.bind=function(c,b){var a=this;
"newTodo"===c?$on(a.$newTodo,"change",function(){b(a.$newTodo.value)}):"removeCompleted"===c?$on(a.$clearCompleted,"click",function(){b()}):"toggleAll"===c?$on(a.$toggleAll,"click",function(){b({completed:this.checked})}):"itemEdit"===c?$live("#todo-list li label","dblclick",function(){b({id:a._itemId(this)})}):"itemRemove"===c?$live("#todo-list .destroy","click",function(){b({id:a._itemId(this)})}):"itemToggle"===c?$live("#todo-list .toggle","click",function(){b({id:a._itemId(this),completed:this.checked})}):
"itemEditDone"===c?a._bindItemEditDone(b):"itemEditCancel"===c&&a._bindItemEditCancel(b)};e.app=e.app||{};e.app.View=d})(window);function hello(e){alert("Hello, "+e)}hello("New user");
