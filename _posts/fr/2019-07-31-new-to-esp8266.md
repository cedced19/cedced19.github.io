---
layout: post
title:  Débutants en ESP8266, mes conseils 
date:   2019-07-31 12:45:40 +0200
categories: arduino nodemcu esp8266
lang: fr
---

*Cet article reprend une de mes conversations avec un ami physicien novice avec les cartes ESP8266. Certaines parties ne sont donc alors pas entièrement détaillés au vu de nos connaissances communes, et de sa capacité à trouver des informations. Je venais de lui parler de l'ESP8266 qu'il ne connaissait pas.*

L'ESP8266 est une puce arduino qui propose du wifi (quand il y a un problème, il est plus simple de juste chercher "esp8266" sur google, au lieu du nom de la carte: on obtient plus de résultats).


Cette puce s'intègre ensuite sur différentes cartes pour qu'elle soit plus pratique à connecter.


Le plus simple et plus pratique sont les cartes nodemcu  [https://amzn.to/2MmnVJW](https://amzn.to/2MmnVJW) (sur AliExpress c'est moins cher).

<img src="/assets/images/nodemcu.jpg" alt="Nodemcu" width="60%">

Il faut faire attention: quand on programme sur Arduino la pin 1 correspond à la GPIO1 alors qu'ici les numéros changent: quand un cable est branché sur D1 alors dans le code il faut programmer 5 (cf schéma au dessus). 


Il faut aussi faire attention à l'alimenter en 3.3V ou alors en USB. Ce que j'utilise pour cela: [https://amzn.to/2K0Pqar](https://amzn.to/2K0Pqar)  (sur AliExpress c'est moins cher).


Il faut installer un plugin (fait en 5 min) sur l'éditeur Arduino pour compiler vers le nodemcu ou autre objet.

Liens utiles: 
* [http://tvaira.free.fr/esp8266/nodemcu-lolin-esp8266.html](http://tvaira.free.fr/esp8266/nodemcu-lolin-esp8266.html)  (aller directement à la partie arduino pour la partie code autant utiliser un autre tutoriel, il n'est pas obligatoire d'utiliser une `class` comme il l'a fait)
* [https://projetsdiy.fr/esp8266-serveur-web-interface-graphique-html/](https://projetsdiy.fr/esp8266-serveur-web-interface-graphique-html/) (il a l'air vraiment bien fait) 



On peut voir mon évolution (d'abord j'ai commencé à utiliser l'ESP-01 puis le nodemcu) [ici](https://github.com/cedced19/garage-doors-opener).
J'ai eu des conversations avec des gens que j'ai recopiées sur ce lien, ça peut peut-être aider. Il y a aussi mes schémas. 
C'est le système pour ouvrir la porte de garage. Il peut être intéressant pour commencer de voir ce que j'ai fait dans ce projet, pour le nodemcu regardez ce fichier: [nodemcu.ino](https://github.com/cedced19/garage-doors-opener/blob/master/nodemcu/nodemcu.ino).
Il faudra se familiariser avec la notion de serveur/client si vous voulez communiquer depuis un navigateur internet avec votre nodemcu.

Moi je renvoie la réponse au format JSON car c'est pour un logiciel que j'ai crée moi-même après, mais on peut directement créer une page internet sur l'ESP8266 comme expliqué [ici](https://projetsdiy.fr/esp8266-serveur-web-interface-graphique-html/).


*On peut trouver d'autres didacticiels, là j'ai cherché naïvement, je ne connais pas votre niveau, des choses peuvent être omises dans ces didacticiels, je ne le verrai pas vu que je connais par cœur le fonctionnement de ces machines.*


J'ai un gros projet "Sensorio" utilisant des ESP8266 disponible ici: [Sensorio](https://github.com/cedced19?utf8=%E2%9C%93&tab=repositories&q=sensorio&type=&language=)
Je conseil [cette vidéo](https://www.youtube.com/watch?v=qVMauy5hPhI) qui montre la puissance de ce système, je peux *in fine* afficher des valeurs de mes capteurs sur un appareil dans le salon, sans même qu'ils ne se connaissent eux-même.
J'ai fait très peu de documentation dessus, c'est un projet très gros mais qui me permet de gagner du temps au final et d'avoir par le même site accès à la quantité d'eau disponible pour mes wc, ou à la température extérieure, ou encore bientôt à la consommation d'électricité de ma pompe à chaleur, et cela n'importe où dans le monde. 
C'est un serveur hébergé sur un Raspberry qui va recevoir et traiter toutes les données des différents capteurs ESP8266 que j'ai. Chaque capteur est accompagné d'un schéma et du code pour le réaliser.


Mes réalisations sont souvent expliquées en vidéo [ici](https://www.youtube.com/channel/UCJHhpW6Za9xWlHZO0i8layw/videos).


Si vous avez beaucoup de temps et que vous êtes assez expérimenté:
Je conseil l'ESP8266-01 si vous avez qu'une pin à utiliser c'est plus petit qu'un pouce (par contre pas de prise USB disponible, il faut utiliser un arduino pour le programmer avec les fiches RX TX)  
Liens utiles ESP8266-01:
* [https://f-leb.developpez.com/tutoriels/arduino/esp8266/debuter/](https://f-leb.developpez.com/tutoriels/arduino/esp8266/debuter/)
* [https://ouilogique.com/esp8266-01/](https://ouilogique.com/esp8266-01/)

